{% extends 'base.html' %}
{% load static %}
{% block content %}

<!-- Features Start -->
<div class="container-fluid features mb-0">
    <div class="container py-3">
        <div class="row g-4 justify-content-center">
            <div class="col-md-6 col-lg-3 col-xl-3">
                <div class="row g-4 align-items-center features-item">
                    <div class="col-4">
                        <div class="rounded-circle position-relative">
                            <div class="overflow-hidden rounded-circle">
                                <img src="/static/img/features-sports-1.jpg" class="img-zoomin img-fluid rounded-circle w-100" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="features-content d-flex flex-column">
                            <p class="text-uppercase mb-2">Sport</p>
                            <a href="{% url 'category' 'sport' %}" class="h6">
                                Sport olamidagi eng muhim voqealar.
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 col-xl-3">
                <div class="row g-4 align-items-center features-item">
                    <div class="col-4">
                        <div class="rounded-circle position-relative">
                            <div class="overflow-hidden rounded-circle">
                                <img src="/static/img/features-technology.jpg" class="img-zoomin img-fluid rounded-circle w-100" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="features-content d-flex flex-column">
                            <p class="text-uppercase mb-2">Texnologiya</p>
                            <a href="{% url 'category' 'texnologiya' %}" class="h6">
                                Texnologiya yangiliklari, IT trendlar.
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 col-xl-3">
                <div class="row g-4 align-items-center features-item">
                    <div class="col-4">
                        <div class="rounded-circle position-relative">
                            <div class="overflow-hidden rounded-circle">
                                <img src="/static/img/features-fashion.jpg" class="img-zoomin img-fluid rounded-circle w-100" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="features-content d-flex flex-column">
                            <p class="text-uppercase mb-2">Moda</p>
                            <a href="{% url 'category' 'moda' %}" class="h6">
                                Moda tendensiyalari.
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-6 col-lg-3 col-xl-3">
                <div class="row g-4 align-items-center features-item">
                    <div class="col-4">
                        <div class="rounded-circle position-relative">
                            <div class="overflow-hidden rounded-circle">
                                <img src="/static/img/features-life-style.jpg" class="img-zoomin img-fluid rounded-circle w-100" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="col-8">
                        <div class="features-content d-flex flex-column">
                            <p class="text-uppercase mb-2">Turmush tarzi</p>
                            <a href="{% url 'category' 'turmush-tarzi' %}" class="h6">
                                Hayot tarzi, sog'lom yashash.
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Features End -->

<!-- Main Post Section Start -->
<div class="container-fluid py-5">
    <div class="container py-5">
        <div class="row g-4">
            <div class="col-lg-7 col-xl-8 mt-0">
                <div class="position-relative overflow-hidden rounded">
                    <img src="{{ main_articles.0.cover.url }}" class="img-fluid rounded img-zoomin w-100" alt="">
                    <div class="d-flex justify-content-center px-4 position-absolute flex-wrap" style="bottom: 10px; left: 0;">
                        <span class="text-white me-3"><i class="fa fa-clock me-1"></i> {{ main_articles.0.read_time }} o'qiladi</span>
                        <span class="text-white me-3"><i class="fa fa-eye me-1"></i> {{ main_articles.0.views }} ko'rildi</span>
                        <span class="text-white me-3"><i class="fa fa-comment-dots me-1"></i> {{ main_articles.0.comments.all.count }} izohlar</span>
                        <span class="text-white"><i class="fa fa-calendar-day me-1"></i> {{ main_articles.0.created_at|date:"d.m.Y H:i" }} joylangan</span>
                    </div>
                </div>
                <div class="border-bottom py-3">
                    <a href="{% url 'article-details' main_articles.0.slug %}" class="display-4 text-dark mb-0 link-hover">{{ main_articles.0.title|truncatechars:75 }}</a>
                </div>
                <p class="mt-3 mb-4 fs-5">{{ main_articles.0.intro }}</p>
                <div class="bg-light p-4 rounded">
                    <div class="news-2">
                        <h3 class="mb-4">Eng ko'p ko'rilgan</h3>
                    </div>
                    <div class="row g-4 align-items-center">
                        <div class="col-md-6">
                            <div class="rounded overflow-hidden">
                                <img src="{{ main_articles.1.cover.url }}" class="img-fluid rounded img-zoomin w-100" alt="">
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="d-flex flex-column">
                                <a href="{% url 'article-details' main_articles.1.slug %}" class="h3 mb-3">
                                    {{ main_articles.1.title|truncatechars:75 }}
                                </a>
                                <p class="mb-2 fs-5"><i class="fa fa-clock me-2"></i>{{ main_articles.1.read_time }} o'qiladi</p>
                                <p class="mb-2 fs-5"><i class="fa fa-eye me-2"></i>{{ main_articles.1.views }} ko'rildi</p>
                                <p class="mb-0 fs-5"><i class="fa fa-comment me-2"></i>{{ main_articles.1.comments.all.count }} izohlar</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-5 col-xl-4">
                <div class="bg-light rounded p-4">
                    <div class="row g-4">
                        <div class="col-12">
                            <div class="rounded overflow-hidden">
                                <img src="{{ main_articles.2.cover.url }}" class="img-fluid rounded img-zoomin w-100" alt="">
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="d-flex flex-column">
                                <a href="{% url 'article-details' main_articles.2.slug %}" class="h4 mb-3">{{ main_articles.2.title|truncatechars:55 }}</a>
                                <p class="fs-5 mb-2"><i class="fa fa-clock me-2"></i>{{ main_articles.2.read_time }} o'qiladi</p>
                                <p class="fs-5 mb-0"><i class="fa fa-eye me-2"></i>{{ main_articles.2.views }} ko'rildi</p>
                            </div>
                        </div>
                        {% for article in main_articles|slice:"3:" %}
                        <div class="col-12">
                            <div class="row g-4 align-items-center">
                                <div class="col-5">
                                    <div class="overflow-hidden rounded">
                                        <img src="{{ article.cover.url }}" class="img-zoomin img-fluid rounded w-100" alt="">
                                    </div>
                                </div>
                                <div class="col-7">
                                    <div class="features-content d-flex flex-column">
                                        <a href="{% url 'article-details' article.slug %}" class="h6 mb-2">{{ article.title|truncatechars:45 }}</a>
                                        <small class="mb-1"><i class="fa fa-clock me-2"></i>{{ article.read_time }} o'qiladi</small>
                                        <small><i class="fa fa-eye me-2"></i>{{ article.views }} ko'rildi</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Main Post Section End -->

<!-- Banner Start -->
<div class="container-fluid py-5 my-5" style="background: linear-gradient(rgba(202, 203, 185, 1), rgba(202, 203, 185, 1));">
    <div class="container">
        <div class="row g-4 align-items-center">
            <div class="col-lg-7">
                <h1 class="mb-4 text-primary">Newsers</h1>
                <h1 class="mb-4">Har hafta yangiliklarni oling</h1>
                <p class="text-dark mb-4 pb-2">Har hafta eng so'nggi yangiliklar, dolzarb tahlillar va muhim voqealar bilan doimiy aloqada bo'ling. Ishonchli manbalar asosida tayyorlangan kontent sizni voqelikdan ortda qoldirmaydi, qarorlaringizni tez va aniq qabul qilishga yordam beradi.</p>
                <div class="position-relative mx-auto">
                    <input class="form-control w-100 py-3 rounded-pill" type="email" placeholder="Pochta manzilingizni kiriting">
                    <button type="submit" class="btn btn-primary py-3 px-5 position-absolute rounded-pill text-white h-100" style="top: 0; right: 0;">Obuna bo'ling</button>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="rounded">
                    <img src="/static/img/banner-img.jpg" class="img-fluid rounded w-100 rounded" alt="">
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Banner End -->

<!-- Latest News Start -->
<div class="container-fluid latest-news py-5">
    <div class="container py-5">
        <h2 class="mb-4 text-center">So'ngi Yangiliklar</h2>
        <div class="latest-news-carousel owl-carousel">
            {% for article in latest_articles %}
            <div class="latest-news-item">
                <div class="bg-light rounded">
                    <div class="rounded-top overflow-hidden" style="height: 220px;">
                        <img src="{{ article.cover.url }}" style="object-fit: cover; width: 100%; height: 100%" class="img-zoomin img-fluid rounded-top w-100" alt="">
                    </div>
                    <div class="d-flex flex-column p-4">
                        <a href="{% url 'article-details' article.slug %}" class="h4 mb-3">{{ article.title|truncatechars:32 }}</a>
                        <div class="d-flex justify-content-between">
                            <span class="small text-body">{{ article.author|truncatechars:14 }}</span>
                            <small class="text-body"><i class="fas fa-calendar-alt me-1"></i>{{ article.created_at|date:"d.m.Y H:s" }}</small>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<!-- Latest News End -->

<!-- Most Populer News Start -->
<div class="container-fluid populer-news py-5">
    <div class="container py-5">
        <div class="tab-class mb-4">
            <div class="row g-4 justify-content-center">
                <div class="col-lg-10 col-xl-9">
                    <div class="d-flex flex-column flex-md-row justify-content-md-between align-items-center border-bottom mb-5">
                        <h1 class="display-5 mb-4 mb-md-0">Nima yangiliklar?</h1>
                        <ul class="nav nav-pills d-inline-flex text-center flex-nowrap">
                            {% for category in top5_categories %}
                            <li class="nav-item mb-3">
                                <a class="nav-link d-flex py-3 bg-light rounded-pill me-2 {% if forloop.first %}active{% endif %}"
                                   data-bs-toggle="pill"
                                   href="#tab-{{ forloop.counter }}">
                                    <span class="text-dark" style="width: 100px;">
                                        {{ category.name }}
                                    </span>
                                </a>
                            </li>
                            {% endfor %}
                        </ul>
                    </div>
                    <div class="tab-content mb-4">
                        {% for articles in top5_categories_articles %}
                        <div id="tab-{{ forloop.counter }}" class="tab-pane fade show p-0 {% if forloop.first %} active {% endif %}">
                            <div class="row g-4">
                                <div class="col-lg-8">
                                    <div class="position-relative rounded overflow-hidden">
                                        <img src="{{ articles.0.cover.url }}" class="img-zoomin img-fluid rounded w-100" alt="">
                                        <div class="position-absolute text-white px-4 py-2 bg-primary rounded" style="top: 20px; right: 20px;">
                                            {{ articles.0.category.name }}
                                        </div>
                                    </div>
                                    <div class="my-4">
                                        <a href="{% url 'article-details' articles.0.slug %}" class="h3">{{ articles.0.title }}</a>
                                    </div>
                                    <div class="d-flex justify-content-between fs-5 mb-4">
                                        <span class="text-dark me-3"><i class="fa fa-clock me-2"></i>{{ articles.0.read_time }}</span>
                                        <span class="text-dark me-3"><i class="fa fa-eye me-2"></i>{{ articles.0.views }}</span>
                                        <span class="text-dark me-3"><i class="fa fa-comment-dots me-2"></i>{{articles.0.comments.count}}</span>
                                        <span class="text-dark"><i class="fa fa-calendar-day me-2"></i>{{ articles.0.created_at }}</span>
                                    </div>
                                    <p class="my-4 fs-5">
                                        {{ articles.0.intro }}
                                    </p>
                                </div>
                                <div class="col-lg-4">
                                    <div class="row g-4">
                                        {% for article in articles|slice:"1:" %}
                                        <div class="col-12">
                                            <div class="row g-4 align-items-center">
                                                <div class="col-5">
                                                    <div class="overflow-hidden rounded">
                                                        <img src="{{ article.cover.url }}" class="img-zoomin img-fluid rounded w-100" alt="">
                                                    </div>
                                                </div>
                                                <div class="col-7">
                                                    <div class="features-content d-flex flex-column">
                                                        <p class="text-uppercase mb-2 fw-bold fs-6">{{ article.category.name }}</p>
                                                        <a href="{% url 'article-details' article.slug %}" class="h5 mb-2">{{ article.title|truncatechars:36 }}</a>
                                                        <small class="text-body d-block fs-6"><i class="fas fa-calendar-alt me-1"></i>{{ article.created_at|date:"d.m.Y H:i" }}</small>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
        </div>
        <div class="border-bottom mb-4">
            <h2 class="my-4 text-center">Eng ko'p ko'rildi</h2>
        </div>
        <div class="whats-carousel owl-carousel">
            {% for article in most_views %}
            <div class="whats-item">
                <div class="bg-light rounded">
                    <div class="rounded-top overflow-hidden">
                        <img src="{{ article.cover.url }}" class="img-zoomin img-fluid rounded-top w-100" alt="">
                    </div>
                    <div class="d-flex flex-column p-4">
                        <a href="{% url 'article-details' article.slug %}" class="h4 mb-3">{{ article.title }}</a>
                        <div class="d-flex justify-content-between">
                            <span class="small text-body">{{ article.author }}</span>
                            <small class="text-body"><i class="fas fa-calendar-alt me-1"></i>{{ article.created_at|date:"m.d.Y H:s" }}</small>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        <div class="mt-5 lifestyle">
            <div class="border-bottom mb-4">
                <h1 class="mb-4 text-center">Foto Lahzalar</h1>
            </div>
            {% if moments %}
            <div class="row g-4 justify-content-center">
                {% for moment in moments %}
                <div class="col-lg-6">
                    <div class="lifestyle-item rounded position-relative" style="height: 400px; overflow: hidden;">
                        {% if moment.photo %}
                        <img src="{{ moment.photo.url }}"
                             class="img-fluid w-100 h-100 rounded"
                             style="object-fit: cover;"
                             alt="{{ moment.title }}">
                        {% else %}
                        <div class="bg-secondary w-100 h-100 rounded d-flex align-items-center justify-content-center">
                            <i class="fa fa-image fa-3x text-white"></i>
                        </div>
                        {% endif %}
                        <div class="lifestyle-content position-absolute w-100"
                             style="bottom: 0; left: 0; background: linear-gradient(transparent, rgba(0,0,0,0.8)); padding: 20px;">
                            <div class="mt-auto">
                                <a href="#" class="h4 text-white link-hover d-block mb-2">
                                    {{ moment.title|truncatechars:33 }}
                                </a>
                                <div class="d-flex justify-content-between mt-3">
                                    <span class="small text-white">
                                        {{ moment.author|default:"Muallif" }}
                                    </span>
                                    <small class="text-white">
                                        <i class="fas fa-calendar-alt me-1"></i>
                                        {{ moment.created_at|date:"d.m.Y H:i" }}
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
            {% else %}
            <div class="alert alert-info text-center py-5">
                <i class="fa fa-camera fa-3x mb-3"></i>
                <h4>Hozircha foto lahzalar mavjud emas</h4>
                <p class="mb-0">Tez orada yangi fotolar qo'shiladi</p>
            </div>
            {% endif %}
        </div>
    </div>
</div>
<!-- Most Populer News End -->

<br>
<br>
<br>

{% endblock %}